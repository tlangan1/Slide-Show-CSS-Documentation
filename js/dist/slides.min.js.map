{"version":3,"sources":["slides.js"],"names":["toArray","list","Array","prototype","id","query","root","byId","getElementById","rootIsDoc","document","nodeType","doc","ownerDocument","indexOf","charAt","ctr","slice","querySelectorAll","strToArray","s","String","a1","split","spaces","addClass","node","classStr","c","cls","className","i","len","length","removeClass","undefined","replace","trim","parseFloat","isWK","ua","this","isOpera","canTransition","_count","cachedCanTransition","_node","_makeCounter","_makeBuildList","SlideShow","slides","_slides","map","el","idx","Slide","_buildList","h","window","location","hash","current","parseInt","e","isNaN","addEventListener","_t","handleKeys","handleWheel","handleTouchEnd","go","state","querySelector","history","prev","next","_update","toggleClass","disableBuilds","navigator","userAgent","isFF","ver","dontPush","innerText","pushState","x","replaceState","setState","Math","max","_notesOn","isOn","forEach","buildNext","style","display","delta","num","_visited","_currentState","_states","setTimeout","_runAutos","createElement","appendChild","some","n","hasAttribute","splice","elem","transitionEnd","l","evt","parentNode","removeEventListener","shift","showNotes","addNotes","ta","currentSlide","B","lastIndexOf","detail","firstPartOfKey","key","removeHidingClass","toggle","paragraphToShow","classList","path","pathname","A","substring","value","localStorage","getItem","setItem","remove","test","target","nodeName","keyCode","_touchStartX","handleTouchStart","SWIPE_SIZE","touches","pageX","changedTouches"],"mappings":"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","file":"slides.min.js","sourcesContent":["// JavaScript Document\r\n// Makes the slidedeck work\r\n\r\n(function () {\r\n  var doc = document,\r\n    disableBuilds = true,\r\n    ctr = 0,\r\n    spaces = /\\s+/,\r\n    a1 = [\"\"],\r\n    toArray = function (list) {\r\n      return Array.prototype.slice.call(list || [], 0);\r\n    },\r\n    byId = function (id) {\r\n      if (typeof id == \"string\") {\r\n        return doc.getElementById(id);\r\n      }\r\n      return id;\r\n    },\r\n    query = function (query, root) {\r\n      if (!query) {\r\n        return [];\r\n      }\r\n      if (typeof query != \"string\") {\r\n        return toArray(query);\r\n      }\r\n      if (typeof root == \"string\") {\r\n        root = byId(root);\r\n        if (!root) {\r\n          return [];\r\n        }\r\n      }\r\n      root = root || document;\r\n      var rootIsDoc = root.nodeType == 9;\r\n      var doc = rootIsDoc ? root : root.ownerDocument || document;\r\n\r\n      // rewrite the query to be ID rooted\r\n      if (!rootIsDoc || \">~+\".indexOf(query.charAt(0)) >= 0) {\r\n        root.id = root.id || \"qUnique\" + ctr++;\r\n        query = \"#\" + root.id + \" \" + query;\r\n      }\r\n\r\n      // don't choke on something like \".yada.yada >\"\r\n      if (\">~+\".indexOf(query.slice(-1)) >= 0) {\r\n        query += \" *\";\r\n      }\r\n      return toArray(doc.querySelectorAll(query));\r\n    },\r\n    strToArray = function (s) {\r\n      if (typeof s == \"string\" || s instanceof String) {\r\n        if (s.indexOf(\" \") < 0) {\r\n          a1[0] = s;\r\n          return a1;\r\n        } else {\r\n          return s.split(spaces);\r\n        }\r\n      }\r\n      return s;\r\n    },\r\n    addClass = function (node, classStr) {\r\n      classStr = strToArray(classStr);\r\n      var cls = \" \" + node.className + \" \";\r\n      for (var i = 0, len = classStr.length, c; i < len; ++i) {\r\n        c = classStr[i];\r\n        if (c && cls.indexOf(\" \" + c + \" \") < 0) {\r\n          cls += c + \" \";\r\n        }\r\n      }\r\n      node.className = cls.trim();\r\n    },\r\n    removeClass = function (node, classStr) {\r\n      var cls;\r\n      if (classStr !== undefined) {\r\n        classStr = strToArray(classStr);\r\n        cls = \" \" + node.className + \" \";\r\n        for (var i = 0, len = classStr.length; i < len; ++i) {\r\n          cls = cls.replace(\" \" + classStr[i] + \" \", \" \");\r\n        }\r\n        cls = cls.trim();\r\n      } else {\r\n        cls = \"\";\r\n      }\r\n\r\n      if (node.className != cls) {\r\n        node.className = cls;\r\n      }\r\n    },\r\n    toggleClass = function (node, classStr) {\r\n      var cls = \" \" + node.className + \" \";\r\n      if (cls.indexOf(\" \" + classStr.trim() + \" \") >= 0) {\r\n        removeClass(node, classStr);\r\n      } else {\r\n        addClass(node, classStr);\r\n      }\r\n    },\r\n    ua = navigator.userAgent,\r\n    isFF = parseFloat(ua.split(\"Firefox/\")[1]) || undefined,\r\n    isWK = parseFloat(ua.split(\"WebKit/\")[1]) || undefined,\r\n    isOpera = parseFloat(ua.split(\"Opera/\")[1]) || undefined,\r\n    canTransition = (function () {\r\n      var ver = parseFloat(ua.split(\"Version/\")[1]) || undefined;\r\n      // test to determine if this browser can handle CSS transitions.\r\n      var cachedCanTransition =\r\n        isWK || (isFF && isFF > 3.6) || (isOpera && ver >= 10.5);\r\n      return function () {\r\n        return cachedCanTransition;\r\n      };\r\n    })();\r\n\r\n  //-----------------------------------------------------------------//\r\n\r\n  var Slide = function (node, idx) {\r\n    this._node = node;\r\n    if (idx >= 0) {\r\n      this._count = idx + 1;\r\n    }\r\n    if (this._node) {\r\n      addClass(this._node, \"slide distant-slide\");\r\n    }\r\n    this._makeCounter();\r\n    this._makeBuildList();\r\n  };\r\n\r\n  Slide.prototype = {\r\n    _node: null,\r\n    _count: 0,\r\n    _buildList: [],\r\n    _visited: false,\r\n    _currentState: \"\",\r\n    _states: [\r\n      \"distant-slide\",\r\n      \"far-past\",\r\n      \"past\",\r\n      \"current\",\r\n      \"future\",\r\n      \"far-future\",\r\n      \"distant-slide\",\r\n    ],\r\n    setState: function (state) {\r\n      if (typeof state != \"string\") {\r\n        state = this._states[state];\r\n      }\r\n\r\n      if (state == \"current\" && !this._visited) {\r\n        this._visited = true;\r\n        this._makeBuildList();\r\n      }\r\n\r\n      removeClass(this._node, this._states);\r\n      addClass(this._node, state);\r\n      this._currentState = state;\r\n\r\n      var _t = this;\r\n      setTimeout(function () {\r\n        _t._runAutos();\r\n      }, 400);\r\n    },\r\n\r\n    _makeCounter: function () {\r\n      if (!this._count || !this._node) {\r\n        return;\r\n      }\r\n\r\n      var c = doc.createElement(\"span\");\r\n      c.innerHTML = this._count;\r\n      c.className = \"counter\";\r\n      this._node.appendChild(c);\r\n    },\r\n\r\n    _makeBuildList: function () {\r\n      this._buildList = [];\r\n      if (disableBuilds) {\r\n        return;\r\n      }\r\n\r\n      if (this._node) {\r\n        this._buildList = query(\"[data-build] > *\", this._node);\r\n      }\r\n\r\n      this._buildList.forEach(function (el) {\r\n        addClass(el, \"to-build\");\r\n      });\r\n    },\r\n\r\n    _runAutos: function () {\r\n      if (this._currentState != \"current\") {\r\n        return;\r\n      }\r\n\r\n      // find the next auto, slice it out of the list, and run it\r\n\r\n      var idx = -1;\r\n      this._buildList.some(function (n, i) {\r\n        if (n.hasAttribute(\"data-auto\")) {\r\n          idx = i;\r\n          return true;\r\n        }\r\n\r\n        return false;\r\n      });\r\n      if (idx >= 0) {\r\n        var elem = this._buildList.splice(idx, 1)[0];\r\n        var transitionEnd = isWK\r\n          ? \"webkitTransitionEnd\"\r\n          : isFF\r\n          ? \"mozTransitionEnd\"\r\n          : \"oTransitionEnd\";\r\n        var _t = this;\r\n        if (canTransition()) {\r\n          var l = function (evt) {\r\n            elem.parentNode.removeEventListener(transitionEnd, l, false);\r\n            _t._runAutos();\r\n          };\r\n          elem.parentNode.addEventListener(transitionEnd, l, false);\r\n          removeClass(elem, \"to-build\");\r\n        } else {\r\n          setTimeout(function () {\r\n            removeClass(elem, \"to-build\");\r\n            _t._runAutos();\r\n          }, 400);\r\n        }\r\n      }\r\n    },\r\n\r\n    buildNext: function () {\r\n      if (!this._buildList.length) {\r\n        return false;\r\n      }\r\n\r\n      removeClass(this._buildList.shift(), \"to-build\");\r\n      return true;\r\n    },\r\n  };\r\n\r\n  //\r\n  // SlideShow class\r\n  //\r\n\r\n  var SlideShow = function (slides) {\r\n    this._slides = (slides || []).map(function (el, idx) {\r\n      return new Slide(el, idx);\r\n    });\r\n\r\n    var h = window.location.hash;\r\n    try {\r\n      this.current = parseInt(h.split(\"#slide\")[1], 10);\r\n    } catch (e) {\r\n      /* squeltch */\r\n    }\r\n\r\n    this.current = isNaN(this.current) ? 1 : this.current;\r\n    var _t = this;\r\n    doc.addEventListener(\r\n      \"keydown\",\r\n      function (e) {\r\n        _t.handleKeys(e);\r\n      },\r\n      false\r\n    );\r\n    doc.addEventListener(\r\n      \"mousewheel\",\r\n      function (e) {\r\n        _t.handleWheel(e);\r\n      },\r\n      false\r\n    );\r\n    doc.addEventListener(\r\n      \"DOMMouseScroll\",\r\n      function (e) {\r\n        _t.handleWheel(e);\r\n      },\r\n      false\r\n    );\r\n    doc.addEventListener(\r\n      \"touchstart\",\r\n      function (e) {\r\n        _t.handleTouchStart(e);\r\n      },\r\n      false\r\n    );\r\n    doc.addEventListener(\r\n      \"touchend\",\r\n      function (e) {\r\n        _t.handleTouchEnd(e);\r\n      },\r\n      false\r\n    );\r\n    window.addEventListener(\r\n      \"popstate\",\r\n      function (e) {\r\n        _t.go(e.state);\r\n      },\r\n      false\r\n    );\r\n    doc.getElementById(\"back\").addEventListener(\r\n      \"click\",\r\n      function (e) {\r\n        _t.prev();\r\n      },\r\n      false\r\n    );\r\n    doc.getElementById(\"next\").addEventListener(\r\n      \"click\",\r\n      function (e) {\r\n        _t.next();\r\n      },\r\n      false\r\n    );\r\n    this._update();\r\n  };\r\n\r\n  SlideShow.prototype = {\r\n    _slides: [],\r\n\r\n    _update: function (dontPush) {\r\n      document.querySelector(\"#presentation-counter\").innerText = this.current;\r\n      if (history.pushState) {\r\n        if (!dontPush) {\r\n          history.pushState(\r\n            this.current,\r\n            \"Slide \" + this.current,\r\n            \"#slide\" + this.current\r\n          );\r\n        }\r\n      } else {\r\n        window.location.hash = \"flopslide\" + this.current;\r\n      }\r\n      for (var x = this.current - 1; x < this.current + 7; x++) {\r\n        if (this._slides[x - 4]) {\r\n          this._slides[x - 4].setState(Math.max(0, x - this.current));\r\n        }\r\n      }\r\n    },\r\n\r\n    current: 0,\r\n\r\n    next: function () {\r\n      if (!this._slides[this.current - 1].buildNext()) {\r\n        this.current = Math.min(this.current + 1, this._slides.length);\r\n        this._update();\r\n      }\r\n    },\r\n    prev: function () {\r\n      this.current = Math.max(this.current - 1, 1);\r\n      this._update();\r\n    },\r\n\r\n    go: function (num) {\r\n      if (!num) return;\r\n      if (history.pushState && this.current != num) {\r\n        history.replaceState(\r\n          this.current,\r\n          \"Slide \" + this.current,\r\n          \"#slide\" + this.current\r\n        );\r\n      }\r\n      this.current = num;\r\n      this._update(true);\r\n    },\r\n\r\n    _notesOn: false,\r\n\r\n    showNotes: function () {\r\n      var isOn = (this._notesOn = !this._notesOn);\r\n      query(\".notes\").forEach(function (el) {\r\n        el.style.display = isOn ? \"\" : \"none\";\r\n      });\r\n    },\r\n\r\n    handleWheel: function (e) {\r\n      var delta = 0;\r\n      if (e.wheelDelta) {\r\n        delta = e.wheelDelta / 120;\r\n        if (isOpera) {\r\n          delta = -delta;\r\n        }\r\n      } else if (e.detail) {\r\n        delta = -e.detail / 3;\r\n      }\r\n\r\n      if (delta > 0) {\r\n        this.prev();\r\n        return;\r\n      }\r\n      if (delta < 0) {\r\n        this.next();\r\n        return;\r\n      }\r\n    },\r\n\r\n    addNotes: function () {\r\n      if (document.querySelector(\".current textarea.mynotes\")) {\r\n        document\r\n          .querySelector(\".current textarea.mynotes\")\r\n          .classList.toggle(\"temphidden\");\r\n        return;\r\n      }\r\n      var ta = document.createElement(\"textarea\"),\r\n        currentSlide = document.querySelector(\".current section\"),\r\n        path = window.location.pathname,\r\n        A = path.lastIndexOf(\"/\") + 1,\r\n        B = path.lastIndexOf(\".\"),\r\n        firstPartOfKey,\r\n        key;\r\n      if (B && B > A) {\r\n        firstPartOfKey = path.substring(A, B);\r\n      } else {\r\n        firstPartOfKey = path.substring(1, path.length - 1) || \"home\";\r\n      }\r\n      //console.log(firstPartOfKey);\r\n      key = firstPartOfKey + window.location.hash;\r\n      ta.value = window.localStorage.getItem(key) || \"\";\r\n      ta.className = \"mynotes\";\r\n\r\n      ta.addEventListener(\"keyup\", function () {\r\n        //console.log(key + ' ' + ta.value)\r\n        window.localStorage.setItem(key, ta.value);\r\n      });\r\n      currentSlide.appendChild(ta);\r\n    },\r\n\r\n    removeHidingClass: function () {\r\n      var paragraphToShow = document.querySelector(\".current .temphidden\");\r\n      if (paragraphToShow) {\r\n        paragraphToShow.classList.remove(\"temphidden\");\r\n      }\r\n    },\r\n\r\n    handleKeys: function (e) {\r\n      // disable keys for these elements\r\n      if (/^(input|textarea|pre|object|style)$/i.test(e.target.nodeName))\r\n        return;\r\n\r\n      switch (e.keyCode) {\r\n        case 37: // left arrow\r\n        case 33: // left clicker\r\n          this.prev();\r\n          break;\r\n        case 39: // right arrow\r\n        // case 32: // space\r\n        case 34: // clicker right\r\n          this.next();\r\n          break;\r\n        case 50: // 2\r\n        case 190: // 2\r\n          this.showNotes();\r\n          this.removeHidingClass();\r\n          break;\r\n        case 52: // 4 (for taking notes with local storage (students)\r\n          this.addNotes();\r\n          break;\r\n          break;\r\n      }\r\n    },\r\n\r\n    _touchStartX: 0,\r\n    handleTouchStart: function (e) {\r\n      this._touchStartX = e.touches[0].pageX;\r\n    },\r\n\r\n    handleTouchEnd: function (e) {\r\n      var delta = this._touchStartX - e.changedTouches[0].pageX;\r\n      var SWIPE_SIZE = 150;\r\n      if (delta > SWIPE_SIZE) {\r\n        this.next();\r\n      } else if (delta < -SWIPE_SIZE) {\r\n        this.prev();\r\n      }\r\n    },\r\n  };\r\n\r\n  // Initialize\r\n  var slideshow = new SlideShow(query(\".slide\"));\r\n  //this.next();\r\n})();\r\n"]}